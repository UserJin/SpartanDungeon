# Spartan Dungeon
## 프로젝트 소개
내일배움캠프 5챕터 스파르탄 던전 만들기 프로젝트입니다.
기본 코드는 강의에서 사용한 코드를 재사용하여 만들었습니다.

### 조작
- wasd: 이동
- e: 상호작용
- Tab: 인벤토리 열기
- Shift: 달리기
- Space: 점프
- F: 시점 변환

### 기능 소개
1. 맵의 파란색 발판을 통해 '점프대'를 구현하였습니다.
2. F키를 누르면 1인칭 시점과 3인칭 시점을 선택할 수 있습니다.
3. 달리기의 속도 증가와 스태미너 감소는 이동할 때만 작동합니다.
4. 움직이는 플랫폼은 접촉한 대상을 자신의 하위 오브젝트로 지정하는 방식으로 구현하였습니다.
5. 아이템은 속도 증가 및 점프력 증가 아이템을 구현하였으며, 10초의 제한시간이 존재합니다.
6. 장비는 이동속도를 올려주는 기능을 구현하였습니다. 마땅한 모델을 구하지 못해, 맵상의 하얀 큐브를 모델로 적용하였습니다.
7. 레이저 트랩은 트랩 모델의 크기에 따라 콜라이더 크기를 변경하도록 구현하였습니다.
8. 상호작용 가능한 오브젝트로 문을 구현하였으며, 맵상의 집에 있는 문과 상호작용하여 확인하실 수 있습니다.
9. 플랫폼 발사기는 1초 뒤에 발사되는 방식으로 발사되는 도중 이동을 금지시켰습니다.

## 구현 기능
### 필수 기능
- [x] 기본 이동 및 점프
- [x] 체력바 UI
- [x] 동적 환경 조사
- [x] 점프대
- [x] 아이템 데이터
- [x] 아이템 사용

### 도전 기능
- [x] 추가 UI
- [x] 3인칭 시점
- [x] 움직이는 플랫폼 구현
- [ ] 벽 타기 및 매달리기
- [x] 다양한 아이템 구현 - 기본으로 구현한 아이템이 이동속도&점프력 상승 아이템이라서 애매함
- [x] 장비 장착
- [x] 레이저 트랩
- [x] 상호작용 가능한 오브젝트 표시
- [x] 플랫폼 발사기
- [ ] 발전된 AI

## 트러블 슈팅

### Interaction Null Reference
- 문제 정의: 상호작용 기능을 이식하는 과정에서 널 레퍼런스 오류가 발생함
- 사실 수집: 디버그 로그 기능을 통해 검출한 오브젝트를 출력 -> 오브젝트 하위의 모델이 검출됨, 모델에도 콜라이더가 달려있음
- 원인 추론: 모델의 레이어도 Interactable이기 때문에 콜라이더에 의해 상위 오브젝트보다 먼저 검출된것으로 추측
- 조치: 모델의 콜라이더를 제거
- 결과: 정상적으로 검출되는 것을 확인

### 아이템 능력치 복구 문제
- 문제 정의: 아이템을 2번 사용하면 능력치가 상승한 상태로 유지되는 문제가 발생
- 사실 수집: 아이템 로직은 사용 시 이전의 능력치를 저장하고 효과가 끝나면 원상복구 하는 식으로 설계되어있음
- 원인 추론: 2번째 사용에서 1번째 사용으로 변경된 능력치를 저장하게 되면서 발생한 문제로 추측
- 조치: 기존의 방식에서 플레이어 스탯정보를 SO로 따로 저장하고 이를 가져오는 방법으로 수정
- 결과: 정상적으로 능력치가 복구됨

### 플랫폼 발사기 이동 문제
- 문제 정의: 플랫폼 발사기를 구현하면서 y축 발사는 잘 이루어지나, x,z축 이동은 제대로 이루어지지 않는 문제가 발생
- 사실 수집: 디버그 로그를 통해 입력되는 값은 제대로 적용되는 것을 확인, 관련 정보를 찾는 중 유사한 상황에서 다른 스크립트가 영향을 끼친것 같다는 글을 발견함
- 원인 추론: 플레이어의 이동은 매 프레임마다 속도를 입력된 값으로 수정하는 방식, 그러므로 속도가 강제로 적용되는 것으로 추측
- 조치: 추가적인 외부의 힘으로 적용하는것에 실패하여 발사중에는 이동을 금지시키는 것으로 수정
- 결과: 정상적으로 발사가 이루어짐
- 
## 고찰
- 기존의 코드를 재사용하는 방법을 사용하면서 일부 기능(ex. 방어구 장착)에서 기존의 시스템을 어느정도 유지하면서 새로운 시스템을 만드려다보니
  실제로는 하드코딩으로 작성하게 됨. 다음에 직접 만든다면 만들기 전에 설계를 한 번 하고 만들 필요가 있다고 생각함
